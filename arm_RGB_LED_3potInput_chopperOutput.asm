		AREA LAB, CODE, READONLY
	PINSEL1 EQU 0XE002C004
	AD0CR   EQU 0XE0034000
	AD0GDR  EQU 0XE0034004
	T0CTCR 	EQU 0XE0004070 ; TIMER 0 CONTROL REG,SET TIMER/COUNTER MODE,POSEDGE,NEGEDGE
	T0PR   	EQU 0XE000400C ; TIMER 0 PRESCALER REG
	T0TCR 	EQU 0XE0004004 ; TIMER 0 SET RESET REG
	T0TC	EQU 0XE0004008 ; TIMER 0 TIMER COUNTER REG
	T0MCR	EQU 0XE0004014 ; TIMER 0 MATCH CONTROL REG
	T0MR0	EQU 0XE0004018 ; TIMER MATCH REG - WHEN TOTC == TOMR0, SAY TOGGLING TO HAPPEN
	T0EMR	EQU 0XE000403C ; TIMER 0 EXTERNAL MATCH REG
	PINSEL0	EQU 0XE002C000 ;
		
		
		; TIMER MATCH SETTINGS
		LDR R0, =PINSEL0
		MOV R1, #0X80		
		; 8 IS MAKING THE 7TH BIT OF PINSEL0 REG TO HIGH TO ACTIVATE 
		; PORT PIN P0.3 AND CONNECT WITH THE MATCH SIGNAL
		; MAT 0.0(TIMER 0) MODE SET 
		STR R1, [R0]
		
		LDR R0, =T0CTCR
		MOV R1, #0X0	; TO MAKE TIMER MODE ACTIVE 
		STR R1, [R0]
		
		LDR R0, =T0PR
		LDR R1, =0X0BB7
		; THE CLOCK OF TIMER GETS PULSES WITH FREQ AS FCLK = Fosc/4, 
		; SINCE THE Fosc IS 12MHZ THEN FCLK IS 3 MHZ 
		; THE TIMING IS CALCULATED BY THE FORMULA T = PR+1/FCLK, 
		; HENCE TO GET 1ms = 2999+1/3000000 = 0.001s = 1 ms
		; 2999D = 0BB7H
		STR R1, [R0]
		
		LDR R0, =T0MCR
		MOV R1, #0X02	; RESET ON MR0, THE TC WILL RESET IF MR0 MATCHES IT
		STR R1, [R0]
		
		
		LDR R0, =T0EMR
		MOV R1, #0X31 	; 3 -> FOR BIT 4 AND 5 , IE TO MAKE PIN TOGGLE WHEN 
						; MATCH OCCURS, 1->ACTIVATE EXTERNAL MATCH 0
		STR R1, [R0]
		
		LDR R0, =T0TCR
		MOV R1, #0X02	; 2-> FOR TIMER COUNTER RESET
		STR R1, [R0]

		;;;;

		; SOFTWARE MODE ie BURST = 0
		LDR R1, =PINSEL1
		; ACTIVATE AD0.1 AT P0.28, AD0.2 AT P0.29, AD0.3 AT P0.30
		LDR R2, =0X15000000
		STR R2, [R1]
		LDR R1, =AD0CR		; ADDRESS OF AD0 CONTROL REG
		; 1-> START CONVERSION,2->MAKE CONVERTER OPERATIONAL FROM POWER DOWN MODE
		; 1-> SET CLK/DIV , 2-> SELECT CHANNEL 1
		
		; AD0.1
		LDR R2, =0X01200102	
		STR R2, [R1]
	L	LDR R3, =AD0GDR		; ADDRESS OF AD0 GLOBAL DATA REG
		LDR R4, [R3]
		LDR R1, =0X80000000
		AND R1, R4			; ie R1 = R1 & R4 BITWISE
		LDR R5, =0X80000000
		CMP R1, R5
		BNE L
		LDR R4, [R3]
		LDR R1, =0X0000FFC0
		AND R7, R1, R4
		LSR R8, R7, #6		; LOGICAL SHIFT RIGHT 6 TIMES
		
		; AD0.2
		LDR R1, =AD0CR		; ADDRESS OF AD0 CONTROL REG
		LDR R2, =0X01200104	
		; 1-> START CONVERSION,2->MAKE CONVERTER OPERATIONAL FROM POWER DOWN MODE
		; 1-> SET CLK/DIV , 4-> SELECT CHANNEL 1
		STR R2, [R1]
	LP	LDR R3, =AD0GDR		; ADDRESS OF AD0 GLOBAL REG
		LDR R4, [R3]
		LDR R1,  =0X80000000
		AND R1, R4
		LDR R5, =0X80000000
		CMP R1, R5
		BNE LP
		LDR R4, [R3]
		LDR R1, =0X0000FFC0
		AND R7, R1, R4
		LSR R9, R7, #6		; LOGICAL SHIFT RIGHT
		
		; AD0.3
		LDR R1, =AD0CR		;ADDRESS OF AD0 CONTROL REG
		LDR R2, =0X01200108	
		; 1-> START CONVERSION,2->MAKE CONVERTER OPERATIONAL FROM POWER DOWN MODE
		; 1-> SET CLK/DIV , 8-> SELECT CHANNEL 3
		STR R2, [R1]
	LA	LDR R3, =AD0GDR		; ADDRESS OF AD0 GLOBAL DATA REG
		LDR R4, [R3]
		LDR R1, =0X80000000
		AND R1, R4
		LDR R5, =0X80000000
		CMP R1, R5
		BNE LA
		LDR R4, [R3]
		LDR R1, =0X0000FFC0
		AND R7, R1, R4
		LSR R10, R7, #6		; LOGICAL SHIFT RIGHT
		
	L1	B L1
		END
		
		 